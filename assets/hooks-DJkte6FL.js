import{w as E,r as a,v,z as _}from"./index-BLfwcZnC.js";import{b as k,c as M,d as w}from"./EventService-DtRxcSdU.js";import{u as I}from"./useQuery-DeaprV5y.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dd3d499e-1ec7-4cf8-a590-ff38116ed201",e._sentryDebugIdIdentifier="sentry-dbid-dd3d499e-1ec7-4cf8-a590-ff38116ed201")}catch{}function D(){const{eventId:e,stageId:t}=v(),[d,c]=a.useState(null),[u,n]=a.useState(!0),s=I(["classes",t,e],()=>M(e,t),{refetchOnWindowFocus:!1}),r=I(["clubs",t,e],()=>w(e,t),{refetchOnWindowFocus:!1}),{setClassClubSearchParam:l,getClassClubSearchParamName:f}=R(),g=a.useCallback((C,o)=>{var P;n(o);const S=(P=(o?s:r).data)==null?void 0:P.data.find(y=>y.id===C);S&&(c(S),l(S,o))},[s,r,l]),i=a.useRef(!1);a.useEffect(()=>{if(i.current||!s.data||!r.data)return;i.current=!0;const[C,o]=f();if(C&&o!==null){const b=N(o?s:r,C);b&&(n(o),c(b))}},[s,s.data,r,r.data,f]);const A=a.useCallback(()=>{s.refetch(),r.refetch()},[s,r]);return{activeItem:d,isClass:u,classesQuery:s,clubsQuery:r,refresh:A,setClassClubId:g}}function N(e,t){var d;return(d=e.data)==null?void 0:d.data.find(c=>c.short_name===t)}const h="class",m="club";function R(){const[e,t]=_(),d=a.useCallback((n,s)=>{s?(e.set(h,n.short_name),e.delete(m)):(e.delete(h),e.set(m,n.short_name)),t(e,{replace:!0})},[e,t]),c=a.useCallback(()=>{e.delete(h),e.delete(m)},[e]),u=a.useCallback(()=>{const n=e.get(h),s=e.get(m);return n?s?(c(),[null,null]):[n,!0]:s?n?(c(),[null,null]):[s,!1]:[null,null]},[c,e]);return{setClassClubSearchParam:d,getClassClubSearchParamName:u}}function F(e,t){const{token:d}=E(),[c,u]=a.useState([]),[n,s]=a.useState(!0),[r,l]=a.useState(1),[f,g]=a.useState(1);return a.useEffect(()=>{k(r,e,d,t).then(i=>(u(i.data),s(!1),g(Math.ceil(i.total/i.limit)),()=>s(!0)))},[r]),[c,n,r,l,f]}function x(e,t){const[d,c]=a.useState(e),[u,n]=_(),s="menu";a.useEffect(()=>{if(t.length>0){const l=u.get(s);if(l&&t.includes(l))c(t.indexOf(l));else{const f=t[e];u.set(s,f),n(u,{replace:!0}),c(e)}}},[t]);const r=a.useCallback(l=>{c(l),u.set(s,t[l]),n(u,{replace:!0})},[t,u,n]);return[d,r]}export{D as a,x as b,R as c,F as u};
//# sourceMappingURL=hooks-DJkte6FL.js.map
